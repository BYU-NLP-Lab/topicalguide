{% extends "base.html" %}
{% comment %}
The Topic Browser
Copyright 2010-2011 Brigham Young University

This file is part of the Topic Browser <http://nlp.cs.byu.edu/topic_browser>.

The Topic Browser is free software: you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License as published by the
Free Software Foundation, either version 3 of the License, or (at your option)
any later version.

The Topic Browser is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License
for more details.

You should have received a copy of the GNU Affero General Public License along
with the Topic Browser.  If not, see <http://www.gnu.org/licenses/>.

If you have inquiries regarding any further use of the Topic Browser, please
contact the Copyright Licensing Office, Brigham Young University, 3760 HBLL,
Provo, UT 84602, (801) 422-9339 or 422-3821, e-mail copyright@byu.edu.
{% endcomment %}

{% block scripts %}
	<script charset="utf=8" type="text/javascript">
	    $(function() {
	        $( "#accordion" ).accordion();
	    });
	</script>{% comment %}
	<script charset="utf=8" type="text/javascript">
	function update_plot() {
	    $("img#plot_image").attr("src", "/site-media/ajax-loader.gif");
	    var url_base = "/feeds/topic-attribute-plot/";
	
	    url_base += 'attributes/'+{{ sample_attribute }}+'/';
	    
	    var values = {{ sample_attrvalues }};
	    url_base += "values/" + values[0];
	    for (var i = 1; i < values.length; i++) {
	        url_base += "." + values[i];
	    }
	    
	    url_base += "/topics/";
	    var topics = {{ sample_topics }};
	    url_base += topics[0];
	    for (var i = 1; i < topics.length; i++) {
	        url_base += "." + topics[i];
	    }
	
	    $("img#plot_image").attr("src", url_base);
	}
	</script>
{% endcomment %}{% endblock %}

{% comment %}
<img name="plot_image" id="plot_image" src="/site-media/ajax-loader.gif"/>
<script charset="utf=8" type="text/javascript">
    update_plot();
</script>
{% endcomment %}

{% block current_view_desc %}Available Datasets{% endblock %}

{% comment %}
{% block before_presentation_area %}
    <h1>Available Datasets</h1>
{% endblock %}
{% endcomment %}

{% block presentation_area %}
<div id="accordion">
    {% for dataset in datasets %}
    <div>
        <span class="name">{{dataset.readable_name}}</span>
        <!-- TODO: icon  -->
    </div>
    <div>
        <p class="description">{{dataset.description|linebreaks}}</p>
        Analyses
        {% if dataset.analysis_set.all %}
	        <ul class="analyses">
	        {% for analysis in dataset.analysis_set.all %}
	            <li class="ui-widget{% ifequal analysis curanalysis %} current_analysis{% endifequal %}">
	            	<div class="ui-widget-content ui-corner-all	">
		                <div class="ui-widget-header ui-corner-all"><a class="name" href="/datasets/{{dataset.name}}/analyses/{{analysis.name}}">{{analysis.readable_name}}</a></div>
		                <div class="description">{{analysis.description|linebreaks}}</div>
	                </div>
	            </li>
	        {% endfor %}
	        </ul>
        {% else %}
            <div class="ui-state-highlight">No analyses yet.</div>
        {% endif %}
        
    </div>
    {% endfor %}
</div>
{% endblock %}

